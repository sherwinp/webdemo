<?xml version="1.0" encoding="utf-8"?>
<html 
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
	<meta name="viewport"
		content="height=device-height,width=device-width, initial-scale=1.0, user-scalable=yes" />
	<link rel="shortcut icon" href="#{request.contextPath}/favicon.ico" />
	<title>webdemo</title>
	<link rel="stylesheet" href="resources/style.css" type="text/css" />
	<script type="text/javascript" src="resources/jquery.min.js"></script>
</h:head>
<h:body>
	<header></header>
	<h:form id="theForm" name="theForm">
			<nav>
				<span><a href="users.html">Manage Users</a></span>
				<span><a href="vouchers.html">Manage Vouchers</a></span>
				<span><a href="stats.html">Voucher Useage</a></span>
				<span><h:commandLink action="#{requestController.logout}" outcome="index.html">Sign Out</h:commandLink></span>
			</nav>
			<main>
				<div id="searchbox">
					<input id="searchinputbox" type="text" /><input id="searchbutton" type="submit" onclick="return false;" value=""/>
				</div>
				<ul id="list">
				</ul>
			</main>
	</h:form>
	<footer>
	</footer>
	<script type="text/javascript" src="resources/handlebars.js" ></script>
	<script type="text/javascript">
	function search(){
				var searchstring = $('searchinputbox').value;
				searchstring = searchstring.replace(/[a-z]!/g, 'i');
				$.ajax({
					   url: 'api/users',
					   data: {
					      format: 'json'
					   },
					   error: function() {
						   console.log( "error ajax: load. " );
					   },
					   dataType: 'json',
					   success: function(data) {
						   console.log( "success." );
				            var Source = document.getElementById('container-template').textContent;
				            // Compile Template 
				            var Template = Handlebars.compile(Source);
				            console.log(data);
				            $('#list').html(Template(data));
					   },
					   type: 'GET'
					});
	}
	window.onload = search;
	</script>
</h:body>
</html>